diff '--exclude=.git' -urN a/configure b/configure
--- a/configure	2015-10-12 04:09:16.000000000 -0400
+++ b/configure	2015-11-23 13:50:05.319622255 -0500
@@ -839,6 +839,8 @@
 enable_maintainer_mode
 enable_dependency_tracking
 enable_schemas_compile
+enable_colord
+enable_packagekit
 with_help_dir
 enable_nls
 '
@@ -1487,6 +1489,8 @@
                           speeds up one-time build
   --disable-schemas-compile
                           Disable regeneration of gschemas.compiled on install
+  --enable-colord         Enable colord support[[default=auto]]
+  --enable-packagekit     Enable packagekit support[[default=auto]]
   --disable-nls           do not use Native Language Support
 
 Optional Packages:
@@ -4417,6 +4421,15 @@
 
 fi
 
+# Check whether --enable-colord was given.
+if test "${enable_colord+set}" = set; then :
+  enableval=$enable_colord; enable_colord=$enableval
+else
+  enable_colord=auto
+fi
+
+have_colord=no
+if test x"$enable_colord" != "xno"; then
 
 pkg_failed=no
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for COLORD" >&5
@@ -4427,17 +4440,17 @@
  elif test -n "$PKG_CONFIG"; then
     if test -n "$PKG_CONFIG" && \
     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"
-    colord
-\""; } >&5
+        colord
+    \""; } >&5
   ($PKG_CONFIG --exists --print-errors "
-    colord
-") 2>&5
+        colord
+    ") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   pkg_cv_COLORD_CFLAGS=`$PKG_CONFIG --cflags "
-    colord
-" 2>/dev/null`
+        colord
+    " 2>/dev/null`
 		      test "x$?" != "x0" && pkg_failed=yes
 else
   pkg_failed=yes
@@ -4450,17 +4463,17 @@
  elif test -n "$PKG_CONFIG"; then
     if test -n "$PKG_CONFIG" && \
     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"
-    colord
-\""; } >&5
+        colord
+    \""; } >&5
   ($PKG_CONFIG --exists --print-errors "
-    colord
-") 2>&5
+        colord
+    ") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   pkg_cv_COLORD_LIBS=`$PKG_CONFIG --libs "
-    colord
-" 2>/dev/null`
+        colord
+    " 2>/dev/null`
 		      test "x$?" != "x0" && pkg_failed=yes
 else
   pkg_failed=yes
@@ -4482,21 +4495,33 @@
 fi
         if test $_pkg_short_errors_supported = yes; then
 	        COLORD_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors --cflags --libs "
-    colord
-" 2>&1`
+        colord
+    " 2>&1`
         else
 	        COLORD_PKG_ERRORS=`$PKG_CONFIG --print-errors --cflags --libs "
-    colord
-" 2>&1`
+        colord
+    " 2>&1`
         fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$COLORD_PKG_ERRORS" >&5
 
-	have_colord=no
+	if test x"$enable_colord" = xauto; then
+        { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "--enable-colord was given, but could not be found
+See \`config.log' for more details" "$LINENO" 5; }
+     fi
+
 elif test $pkg_failed = untried; then
      	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
-	have_colord=no
+	if test x"$enable_colord" = xauto; then
+        { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "--enable-colord was given, but could not be found
+See \`config.log' for more details" "$LINENO" 5; }
+     fi
+
 else
 	COLORD_CFLAGS=$pkg_cv_COLORD_CFLAGS
 	COLORD_LIBS=$pkg_cv_COLORD_LIBS
@@ -4504,6 +4529,7 @@
 $as_echo "yes" >&6; }
 	have_colord=yes
 fi
+fi
  if test $have_colord = yes; then
   HAVE_COLORD_TRUE=
   HAVE_COLORD_FALSE='#'
@@ -4513,6 +4539,15 @@
 fi
 
 
+# Check whether --enable-packagekit was given.
+if test "${enable_packagekit+set}" = set; then :
+  enableval=$enable_packagekit; enable_packagekit=$enableval
+else
+  enable_packagekit=auto
+fi
+
+have_packagekit=no
+if test x"$enable_packagekit" != "xno"; then
 
 pkg_failed=no
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PACKAGEKIT" >&5
@@ -4523,17 +4558,17 @@
  elif test -n "$PKG_CONFIG"; then
     if test -n "$PKG_CONFIG" && \
     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"
-    packagekit-glib2
-\""; } >&5
+        packagekit-glib2
+    \""; } >&5
   ($PKG_CONFIG --exists --print-errors "
-    packagekit-glib2
-") 2>&5
+        packagekit-glib2
+    ") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   pkg_cv_PACKAGEKIT_CFLAGS=`$PKG_CONFIG --cflags "
-    packagekit-glib2
-" 2>/dev/null`
+        packagekit-glib2
+    " 2>/dev/null`
 		      test "x$?" != "x0" && pkg_failed=yes
 else
   pkg_failed=yes
@@ -4546,17 +4581,17 @@
  elif test -n "$PKG_CONFIG"; then
     if test -n "$PKG_CONFIG" && \
     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"
-    packagekit-glib2
-\""; } >&5
+        packagekit-glib2
+    \""; } >&5
   ($PKG_CONFIG --exists --print-errors "
-    packagekit-glib2
-") 2>&5
+        packagekit-glib2
+    ") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   pkg_cv_PACKAGEKIT_LIBS=`$PKG_CONFIG --libs "
-    packagekit-glib2
-" 2>/dev/null`
+        packagekit-glib2
+    " 2>/dev/null`
 		      test "x$?" != "x0" && pkg_failed=yes
 else
   pkg_failed=yes
@@ -4578,21 +4613,33 @@
 fi
         if test $_pkg_short_errors_supported = yes; then
 	        PACKAGEKIT_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors --cflags --libs "
-    packagekit-glib2
-" 2>&1`
+        packagekit-glib2
+    " 2>&1`
         else
 	        PACKAGEKIT_PKG_ERRORS=`$PKG_CONFIG --print-errors --cflags --libs "
-    packagekit-glib2
-" 2>&1`
+        packagekit-glib2
+    " 2>&1`
         fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$PACKAGEKIT_PKG_ERRORS" >&5
 
-	have_packagekit=no
+	if test x"$enable_packagekit" = xauto; then
+        { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "--enable-packagekit was given, but could not be found
+See \`config.log' for more details" "$LINENO" 5; }
+     fi
+
 elif test $pkg_failed = untried; then
      	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
-	have_packagekit=no
+	if test x"$enable_packagekit" = xauto; then
+        { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "--enable-packagekit was given, but could not be found
+See \`config.log' for more details" "$LINENO" 5; }
+     fi
+
 else
 	PACKAGEKIT_CFLAGS=$pkg_cv_PACKAGEKIT_CFLAGS
 	PACKAGEKIT_LIBS=$pkg_cv_PACKAGEKIT_LIBS
@@ -4600,6 +4647,7 @@
 $as_echo "yes" >&6; }
 	have_packagekit=yes
 fi
+fi
  if test $have_packagekit = yes; then
   HAVE_PACKAGEKIT_TRUE=
   HAVE_PACKAGEKIT_FALSE='#'
diff '--exclude=.git' -urN a/configure.ac b/configure.ac
--- a/configure.ac	2015-10-10 17:16:26.000000000 -0400
+++ b/configure.ac	2015-11-23 13:46:19.941847313 -0500
@@ -31,14 +31,40 @@
     gusb
 ])
 
-PKG_CHECK_MODULES(COLORD, [
-    colord
-], have_colord=yes, have_colord=no)
+AC_ARG_ENABLE([colord],
+    AS_HELP_STRING([--enable-colord],
+                   [Enable colord support[[default=auto]]]),
+    [enable_colord=$enableval],
+    [enable_colord=auto])
+have_colord=no
+if test x"$enable_colord" != "xno"; then
+    PKG_CHECK_MODULES(COLORD, [
+        colord
+    ],
+    [have_colord=yes],
+    [if test x"$enable_colord" = xauto; then
+        AC_MSG_FAILURE([--enable-colord was given, but could not be found])
+     fi
+    ])
+fi
 AM_CONDITIONAL(HAVE_COLORD, test $have_colord = yes)
 
-PKG_CHECK_MODULES(PACKAGEKIT, [
-    packagekit-glib2
-], have_packagekit=yes, have_packagekit=no)
+AC_ARG_ENABLE([packagekit],
+    AS_HELP_STRING([--enable-packagekit],
+                   [Enable packagekit support[[default=auto]]]),
+    [enable_packagekit=$enableval],
+    [enable_packagekit=auto])
+have_packagekit=no
+if test x"$enable_packagekit" != "xno"; then
+    PKG_CHECK_MODULES(PACKAGEKIT, [
+        packagekit-glib2
+    ],
+    [have_packagekit=yes],
+    [if test x"$enable_packagekit" = xauto; then
+        AC_MSG_FAILURE([--enable-packagekit was given, but could not be found])
+     fi
+    ])
+fi    
 AM_CONDITIONAL(HAVE_PACKAGEKIT, test $have_packagekit = yes)
 
 AC_CHECK_HEADERS([sane/sane.h],[],[AC_MSG_ERROR([SANE not found])])
